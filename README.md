# Проект на Laravel

## Требования

- PHP >= 8.0
- Composer
- Laravel >= 10
- MySQL или другой поддерживаемый СУБД

## Установка

1. **Клонируйте репозиторий**

   ```bash
   git clone https://github.com/RammyBlammy/multireg.git
2. **Перейдите в папку проекта**
    ```bash
   cd multireg
   composer install
3. **Настройте файл .env**

    ```bash
    DB_CONNECTION=mysql
    DB_HOST=127.0.0.1
    DB_PORT=3306
    DB_DATABASE=имя_вашей_базы
    DB_USERNAME=ваш_пользователь
    DB_PASSWORD=ваш_пароль
4. **Создайте базу данных и выполните миграции**
    ```bash
   php artisan migrate
5. **Запустите команду для парсинга городов**
    
   ```bash
   php artisan parse:cities
6. **Создайте базу данных и выполните миграции**
    ```bash
   php artisan migrate
7. **Запустите сервер**
    
   ```bash
   php artisan serve

   Приложение доступно по адресу http://127.0.0.1:8000

8. **API для управления городами**

   
    ```bash
    Добавление города
    Метод: POST
    URL: http://127.0.0.1:8000/cities/
    Тело запроса (JSON):
    {
        "id":"99999",
        "name": "Привет",
        "slug": "privet"
    }
   
   Удаление города
    ```bash
    Метод: DELETE
    URL: http://127.0.0.1:8000/cities/{id}
9. **В текстовом документе с ТЗ приведены скрины работы приложения!! Содержание тз и скриншоты из готового задания по пунктам**
    
   Описание задачи для разработки тестового проекта на Laravel 10

    Цель проекта:
    Создать модуль мультирегиональности с использованием подпапок для каждого города и продемонстрировать его работу. В рамках этого проекта необходимо реализовать маршрутизацию по городам, выделение выбранного города и перенаправление на соответствующую подпапку, если город уже был выбран.
    Задачи:
   
    1.	Отображение списка городов на главной странице:
       
    •	Список городов должен быть загружен с API https://api.hh.ru/areas (только города России).

    •	Каждый город должен иметь свою уникальную ссылку, например:

    •	Казань: site.com/kazan
   
    •	Москва: site.com/msk
   
    •	При клике на город:
   
    •	Открывается страница с тем же списком городов.
   
    •	Выбранный город выделяется жирным шрифтом.
   
    •	Если пользователь на основном домене (например, site.com) и уже выбрал город, происходит 301-ый редирект на соответствующую подпапку с городом, например, site.com/msk.
   
    2.	Автоматическое запоминание города:
   
    •	Если пользователь вводит URL с подпапкой города вручную, например, site.com/kazan, система должна автоматически запомнить выбранный город, даже если ранее был выбран другой город.

    3.	Страницы с информацией:
   
    •	На каждой странице (главная, "о нас", "новости") должен отображаться текущий выбранный город в шапке сайта.

    •	Ссылки на страницы должны быть без указания slug города, например:
   
    •	Выбран город Казань: маршрут route('news') должен вести на site.com/kazan/news.
   
    6.	Не использовать slug напрямую в маршрутах:
   
    •	Роуты должны быть объявлены без явного указания slug, пример:
        ```bash
        Route::get('/', [MainController::class, 'index'])->name('index');
        Route::get('/about', [MainController::class, 'about'])->name('about');
        Route::get('/news', [MainController::class, 'news'])->name('news');
   
    •	При этом маршруты должны корректно работать в контексте выбранного города, например: site.com/msk/news.
   
    Структура страниц:
    1.	Главная страница: Header: отображение выбранного города. Content: список всех городов с возможностью выбора.
   
    2.	Страница "О нас": Header: отображение выбранного города. Content: lorem text.
   
    3.	Страница "Новости": Header: отображение выбранного города. Content: lorem text.
   
    Главная страница:

    Город не выбран:
   
    ![image](https://github.com/user-attachments/assets/5150d7ad-0e66-4446-b631-e09e50d8f34e)

    Выбираем город из списка, допустим, Звенигово, кликаем по нему, в сессии появляется запись, что текущий выбранный город это тот, по которому кликнули. Перекидывает обратно на главную:
   
    ![image](https://github.com/user-attachments/assets/59b98bb4-d0a4-499b-993a-64ef9d9b43c9)
   
    Новости:
   
    ![image](https://github.com/user-attachments/assets/28aa4a4b-5fe4-4b57-81da-2b4febd39d12)

    ![image](https://github.com/user-attachments/assets/461c9a1e-31ce-49a4-873f-d73b3ca529ce)
   
   
    About:
   
    ![image](https://github.com/user-attachments/assets/af63a32a-ddad-4869-8833-4528f6a7073e)
   
    ![image](https://github.com/user-attachments/assets/fa1f0c59-68ce-453e-a5a5-c43bd21dc60d)

    Парсинг городов:
   
    •	Необходимо реализовать парсер для загрузки городов в базу данных.
   
    •	Для парсинга используется API: https://api.hh.ru/areas, только города России.
   
    Дополнительные задачи:
   
    •	Реализовать API методы для добавления и удаления городов из базы данных.
   
    Добавление:

    ![image](https://github.com/user-attachments/assets/dbb89994-2cf5-4add-aa94-3bc46f3728f4)

    Удаление:


    ![image](https://github.com/user-attachments/assets/7e510167-53c4-4065-a6e0-b1e81fda11e1)


    ![image](https://github.com/user-attachments/assets/03276278-b004-4ac3-a731-ffbd49073c89)

    Результат:
   
    •	Исходный код проекта должен быть опубликован на GitHub.

    •	В репозитории должна быть добавлена полная инструкция по развертыванию приложения.
   
    •	Допускается использование сторонних библиотек и пакетов, если их применение оправдано.
   
    Технические требования:
   
    1.	Проект должен быть выполнен на Laravel 10.
   
    2.	Город должен быть выбран и запомнен с помощью механизма сессий или куки для редиректа на соответствующую подпапку.
   
    3.	Все ссылки на страницы (например, "Новости", "О нас") должны корректно работать в контексте выбранного города, и генерироваться на основе текущего выбранного города без явного использования slug в маршрутах.
    
    Вы можете использовать любые сторонние библиотеки или пакеты, если это обосновано.
    
    
